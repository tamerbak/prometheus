<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui" xmlns:rich="http://richfaces.org/rich" xmlns:c="http://java.sun.com/jsp/jstl/core">

<ui:composition template="#{frontController.masterPage}">


	<ui:define name="contenu">
	
	<p:growl id="growl" showDetail="true" sticky="true" />
	<h1 style="padding-left: 10px;">Archive numérique</h1>
	<p:dialog id="dlg2" closable="false" widgetVar="dlg2" modal="false" resizable="false" dynamic="false" > 
		<p:graphicImage value="/images/loading.gif" />
		<p:spacer width="20" height="10" />
		<label style="position: relative;bottom: 10px;">Chargement ...</label>
	</p:dialog>
	<p:toolbar>
		<p:toolbarGroup align="left">
			<p:commandButton action="protogen-dataocr" ajax="false" value="Numériser de nouveaux documents" />
		</p:toolbarGroup>
		<p:toolbarGroup style="padding-top: 9px;" align="right">
			<p:commandLink value="Créer un nouveau modèle" target="_blank" ajax="false" onclick="window.open('http://ns389914.ovh.net:8686/ocrediteur','selectWindow','status,width=1200,height=800');" style="float:right" />
		</p:toolbarGroup>
	</p:toolbar>
	
	<p:panelGrid style="width:100%" >
		<f:facet name="header">
			<p:row><p:column colspan="2">Critères d'exploration</p:column></p:row>
		</f:facet>
		<p:row>
			<p:column>Type de document</p:column>
			<p:column>
				<p:selectOneMenu value="#{gedControl.selectedEntity}" style="width:250px"  > 
					<p:ajax event="change" listener="#{gedControl.entityChanged}" update="beanselect" onstart="PF('dlg2').show();" oncomplete="PF('dlg2').hide();" />
					<f:selectItem itemLabel="" itemValue="" />
					<f:selectItem itemLabel="Facture de vente" itemValue="user_facture_de_vente" />
					<f:selectItem itemLabel="Facture d'achat" itemValue="user_facture_achat" />
					<f:selectItem itemLabel="Devis" itemValue="user_devis_de_vente" />
				</p:selectOneMenu>
			</p:column>
		</p:row>
		<p:row>
			<p:column>Document numérisé</p:column>
			<p:column>
				<p:selectOneMenu id="beanselect" value="#{gedControl.selectedBean}"   style="width:250px" 
						filter="true" filterMatchMode="contains" >
					<f:selectItem itemLabel="" itemValue="" />
					<f:selectItems value="#{gedControl.beans}" var="bn" itemLabel="#{bn.value}" itemValue="#{bn.key}" />
				</p:selectOneMenu>
			</p:column>
		</p:row>
		<p:row>
			<p:column>Modèle utilisé</p:column>
			<p:column>
				<p:selectOneMenu id="driverselect" value="#{gedControl.selectedDriver}"   style="width:250px"
						filter="true" filterMatchMode="contains" >
					<f:selectItem itemLabel="" itemValue="" />
					<f:selectItems value="#{gedControl.drivers}" var="bn" itemLabel="#{bn.label}" itemValue="#{bn.id}" />
				</p:selectOneMenu>
			</p:column>
		</p:row>
		
		<f:facet name="footer">
			<p:row>
				<p:column colspan="3">
					<center><p:commandButton action="#{gedControl.suivant}" ajax="false" value="Suivant"/></center>
				</p:column>
			</p:row>
		</f:facet>
	</p:panelGrid>
	

	
	</ui:define>
	
	<ui:define name="aide">
	
	</ui:define>

</ui:composition>
</html>