<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui" xmlns:rich="http://richfaces.org/rich" xmlns:c="http://java.sun.com/jsp/jstl/core">

<ui:composition template="#{frontController.masterPage}">


	<ui:define name="contenu">
	
	<p:growl id="growl" showDetail="true" sticky="true" />
	<h1 style="padding-left: 10px;">Archive numérique</h1>
	<p:dialog id="dlg2" closable="false" widgetVar="dlg2" modal="false" resizable="false" dynamic="false" > 
		<p:graphicImage value="/images/loading.gif" />
		<p:spacer width="20" height="10" />
		<label style="position: relative;bottom: 10px;">Chargement ...</label>
	</p:dialog> 
	<p:toolbar> 
		<p:toolbarGroup align="left">
			<p:commandButton action="protogen-dataocr" value="Numériser de nouveaux documents" />
		</p:toolbarGroup>
		<p:toolbarGroup style="padding-top: 9px;" align="right">
			<p:commandLink value="Créer un nouveau modèle" target="_blank" ajax="false" onclick="window.open('http://ns389914.ovh.net:8686/ocrediteur','selectWindow','status,width=1200,height=800');" style="float:right" />
		</p:toolbarGroup>
	</p:toolbar>
	<center>
	
	
	</center>
	<p:spacer height="20" width="5" />
		<p:panel id="searchpanel" style="width:99%" header="Filtres de recherche avancée"  >
		<p:panelGrid columns="2" id="searchgrid" style="width:100%">
			
			<c:forEach items="#{gedControl.searchControls}" var="ctrl">
			
				<p:column id="col_#{ctrl.attribute.id}"><h:outputText value="#{ctrl.controlID}"/></p:column>
				<p:column id="colval_#{ctrl.attribute.id}">
				
					<!-- Type Data Reference -->
					<h:panelGrid border="0" cellpadding="10" columns="2" cellspacing="1" columnClasses="fstitle,fsvalue" width="100%" rendered="#{ctrl.reference}">
						<h:outputText></h:outputText>
						<p:selectOneMenu id="drval_#{ctrl.attribute.id}" value="#{ctrl.controlValue}"  style="width:200px">
							<f:selectItem itemLabel="" itemValue="" />
							<f:selectItems var="ke" value="#{ctrl.listReference}" itemValue="#{ke.key}" itemLabel="#{ke.value}" />
						</p:selectOneMenu>
					</h:panelGrid>
					
					
		
					<!-- Type Number -->
					<h:panelGrid border="0" columnClasses="fstitle,fsvalue" cellpadding="10" cellspacing="1" rendered="#{ctrl.attribute.CAttributetype.id==4 || ctrl.attribute.CAttributetype.id==8}"
						style="width:100%" columns="2">
						<h:outputText value="Inférieur à"/>
						<p:inputText id="lth_#{ctrl.attribute.id}" value="#{ctrl.lthan}" style="width:200px"/>
						<h:outputText value="Supérieur à"/>
						<p:inputText id="gth_#{ctrl.attribute.id}" value="#{ctrl.gthan}" style="width:200px"/>
					</h:panelGrid>
					
					<!-- Type String -->
					<h:panelGrid border="0" columnClasses="fstitle,fsvalue" cellpadding="10" cellspacing="1" rendered="#{ctrl.attribute.CAttributetype.id==2}"
						style="width:100%" columns="2">
						<h:outputText value="Commence par"/>
						<p:inputText id="begs_#{ctrl.attribute.id}" value="#{ctrl.lthan}" style="width:200px"/>
						<h:outputText value="Se termine par"/>
						<p:inputText id="ends_#{ctrl.attribute.id}" value="#{ctrl.gthan}" style="width:200px"/>
					</h:panelGrid>
					
					<!-- Type date -->
					<h:panelGrid border="0" columnClasses="fstitle,fsvalue" cellpadding="10" cellspacing="1" rendered="#{ctrl.attribute.CAttributetype.id==3}"
						style="width:100%" columns="2">
						<h:outputText value="Avant"/>
						<p:calendar id="bef_#{ctrl.attribute.id}" locale="#{frontController.localization.langCode}" value="#{ctrl.bdateValue}" />
						<h:outputText value="Après"/>
						<p:calendar id="aft_#{ctrl.attribute.id}" locale="#{frontController.localization.langCode}" value="#{ctrl.adateValue}" />
					</h:panelGrid>
					
				</p:column>
			</c:forEach>
			<f:facet name="footer">
			<p:row>
				<p:column colspan="3">
					<center><p:commandButton action="#{gedControl.search}" ajax="false" value="Recherche"/></center>
				</p:column>
			</p:row>
		</f:facet>
		</p:panelGrid>
	</p:panel>
	
	</ui:define>
	
	<ui:define name="aide">
	
	</ui:define>

</ui:composition>
</html>